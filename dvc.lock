schema: '2.0'
stages:
  data-split:
    cmd: python3 src/data_split.py
    deps:
    - path: data/raw_data/clean_data.csv
      md5: b20c8cf632976544627b454eec4569cd
      size: 333768
    - path: src/data_split.py
      md5: f478a49009e3e370db3d2994b5ff2a6d
      size: 1060
    params:
      params.yaml:
        data-split.seed: 42
        data-split.split: 0.2
    outs:
    - path: data/processed_data/x_test.npy
      md5: 2d112d60d739d98a1c38f2ecaa3a575c
      size: 23424
    - path: data/processed_data/x_train.npy
      md5: 084fe9b3d0ddd59d73acf1c26fad3055
      size: 93120
    - path: data/processed_data/y_test.npy
      md5: c9df630695a5479df6e10a053d80f1b8
      size: 3040
    - path: data/processed_data/y_train.npy
      md5: 75253d33076ed9bc5211e9ec8b6f22d7
      size: 11752
  normalize:
    cmd: python3 src/normalize.py
    deps:
    - path: data/processed_data/x_test.npy
      md5: 2d112d60d739d98a1c38f2ecaa3a575c
      size: 23424
    - path: data/processed_data/x_train.npy
      md5: 084fe9b3d0ddd59d73acf1c26fad3055
      size: 93120
    - path: src/normalize.py
      md5: f16613f9b3084439cd4ba310db24d95d
      size: 731
    outs:
    - path: data/scaling_model.pkl
      md5: c9dee1bc1761b14c472e6b107ba8eba1
      size: 728
  training:
    cmd: python3 src/training.py
    deps:
    - path: data/processed_data/x_train.npy
      md5: 084fe9b3d0ddd59d73acf1c26fad3055
      size: 93120
    - path: data/processed_data/y_train.npy
      md5: 75253d33076ed9bc5211e9ec8b6f22d7
      size: 11752
    - path: data/scaling_model.pkl
      md5: c9dee1bc1761b14c472e6b107ba8eba1
      size: 728
    - path: src/training.py
      md5: 379e97c62e853c47cb76c4070fac3b06
      size: 1836
    params:
      params.yaml:
        training.lr: 0.01
        training.m_depth: 4
        training.min_leaf: 5
        training.min_split: 6
        training.n_est: 500
    outs:
    - path: data/gbrt_model.pkl
      md5: 0dadf6128f31d487e4be7b33baa0e161
      size: 922670
    - path: learning_curve.png
      md5: 1bef88c17d8034cbee55adc47757ed73
      size: 81152
  evaluate:
    cmd: python3 src/evaluate.py
    deps:
    - path: data/gbrt_model.pkl
      md5: 0dadf6128f31d487e4be7b33baa0e161
      size: 922670
    - path: data/processed_data/x_test.npy
      md5: 2d112d60d739d98a1c38f2ecaa3a575c
      size: 23424
    - path: data/processed_data/y_test.npy
      md5: c9df630695a5479df6e10a053d80f1b8
      size: 3040
    - path: data/scaling_model.pkl
      md5: c9dee1bc1761b14c472e6b107ba8eba1
      size: 728
    - path: src/evaluate.py
      md5: 1a2c13421538e50f92b1bda23d9e4c08
      size: 1243
    outs:
    - path: data/prediction.csv
      md5: fe61dda0b918e0ef6f8d13577ca0d38a
      size: 13225
    - path: deviance.png
      md5: 0f6aebc39ad5d2fa4fdd29fcad829218
      size: 32921
    - path: feature_importance.png
      md5: 3150a3af14a9b9375f02d88f188d36a1
      size: 44463
    - path: scores.json
      md5: c9ce82bc23ff2cb8877a0ffdcad1f825
      size: 63
